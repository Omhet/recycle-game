(this["webpackJsonprecycle-game"]=this["webpackJsonprecycle-game"]||[]).push([[0],{1453:function(e,t,s){e.exports=s.p+"static/media/general.4d34993d.png"},1454:function(e,t,s){e.exports=s.p+"static/media/bottle.bc74d347.png"},1455:function(e,t,s){e.exports=s.p+"static/media/bottle.c1fe3920.png"},1456:function(e,t,s){e.exports=s.p+"static/media/can.704b02d9.png"},1457:function(e,t,s){e.exports=s.p+"static/media/ball.b4c6ce66.png"},1458:function(e,t,s){var i={"./glass-bin/dead.png":1459,"./glass-bin/idle.png":1460,"./glass-bin/joy.png":1461,"./glass-bin/puke.png":1462,"./metal-bin/dead.png":1463,"./metal-bin/idle.png":1464,"./metal-bin/joy.png":1465,"./metal-bin/puke.png":1466,"./paper-bin/dead.png":1467,"./paper-bin/idle.png":1468,"./paper-bin/joy.png":1469,"./paper-bin/puke.png":1470,"./plastic-bin/dead.png":1471,"./plastic-bin/idle.png":1472,"./plastic-bin/joy.png":1473,"./plastic-bin/puke.png":1474};function a(e){var t=n(e);return s(t)}function n(e){if(!s.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}a.keys=function(){return Object.keys(i)},a.resolve=n,e.exports=a,a.id=1458},1459:function(e,t,s){e.exports=s.p+"static/media/dead.573cb6fa.png"},1460:function(e,t,s){e.exports=s.p+"static/media/idle.09fb80fe.png"},1461:function(e,t,s){e.exports=s.p+"static/media/joy.12b27694.png"},1462:function(e,t,s){e.exports=s.p+"static/media/puke.4b2f37db.png"},1463:function(e,t,s){e.exports=s.p+"static/media/dead.1ed5285c.png"},1464:function(e,t,s){e.exports=s.p+"static/media/idle.3391f1e7.png"},1465:function(e,t,s){e.exports=s.p+"static/media/joy.fa11b230.png"},1466:function(e,t,s){e.exports=s.p+"static/media/puke.fb56354c.png"},1467:function(e,t,s){e.exports=s.p+"static/media/dead.dae8b1a6.png"},1468:function(e,t,s){e.exports=s.p+"static/media/idle.2979a853.png"},1469:function(e,t,s){e.exports=s.p+"static/media/joy.92846bbd.png"},1470:function(e,t,s){e.exports=s.p+"static/media/puke.a396652f.png"},1471:function(e,t,s){e.exports=s.p+"static/media/dead.6b793ffc.png"},1472:function(e,t,s){e.exports=s.p+"static/media/idle.f0727a59.png"},1473:function(e,t,s){e.exports=s.p+"static/media/joy.e4e15212.png"},1474:function(e,t,s){e.exports=s.p+"static/media/puke.562258ce.png"},1475:function(e,t,s){e.exports=s.p+"static/media/gradient.56f649e6.png"},1476:function(e,t,s){e.exports=s.p+"static/media/floor.37c105d5.png"},1477:function(e,t,s){e.exports=s.p+"static/media/pavement.38c1f5de.png"},1478:function(e,t,s){e.exports=s.p+"static/media/grass.3098b706.png"},1479:function(e,t,s){e.exports=s.p+"static/media/shrub.3a52957f.png"},1480:function(e,t,s){e.exports=s.p+"static/media/city.7a01eff4.png"},1481:function(e,t,s){e.exports=s.p+"static/media/city-back.41699a50.png"},1482:function(e,t,s){var i={"./cloud-0.png":1483,"./cloud-1.png":1484,"./cloud-2.png":1485};function a(e){var t=n(e);return s(t)}function n(e){if(!s.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}a.keys=function(){return Object.keys(i)},a.resolve=n,e.exports=a,a.id=1482},1483:function(e,t,s){e.exports=s.p+"static/media/cloud-0.c2b09be0.png"},1484:function(e,t,s){e.exports=s.p+"static/media/cloud-1.069eb259.png"},1485:function(e,t,s){e.exports=s.p+"static/media/cloud-2.504be3ed.png"},1486:function(e,t,s){e.exports=s.p+"static/media/font.b8d1bfa9.png"},1487:function(e,t,s){e.exports=s.p+"static/media/font.4d6c771c.fnt"},1488:function(e,t,s){e.exports=s.p+"static/media/logo.7c7e307c.png"},1489:function(e,t,s){e.exports=s.p+"static/media/play.468603cc.png"},1490:function(e,t,s){e.exports=s.p+"static/media/icon.671ffdcf.png"},1491:function(e,t,s){e.exports=s.p+"static/media/heart.092e501d.png"},1492:function(e,t,s){e.exports=s.p+"static/media/main.040c9d02.mp3"},1493:function(e,t,s){e.exports=s.p+"static/media/puke.145c2dc5.mp3"},1494:function(e,t,s){e.exports=s.p+"static/media/joy.a23e8d23.mp3"},1495:function(e,t,s){e.exports=s.p+"static/media/pop.0063f25d.mp3"},1496:function(e,t,s){e.exports=s.p+"static/media/whoosh.408dd7fb.mp3"},1497:function(e,t,s){e.exports=s.p+"static/media/stop.b3665476.mp3"},1498:function(e,t,s){e.exports=s.p+"static/media/ding.9a5d9b62.mp3"},1499:function(e,t,s){e.exports=s.p+"static/media/heartbeat.fffd7041.mp3"},1500:function(e,t,s){"use strict";s.r(t);s(535);const i="boot",a="main",n={waste:{general:"general-waste",plastic:{bottle:"plastic-bottle"},glass:{bottle:"glass-bottle"},metal:{can:"can"},paper:{ball:"ball"}},bin:{glass:"glass-bin",paper:"paper-bin",metal:"metal-bin",plastic:"plastic-bin"},back:{gradient:"gradient",floor:"floor",pavement:"pavement",grass:"grass",shrub:"shrub",city:"city",cityBack:"city-back",clouds:{cloud0:"cloud-0",cloud1:"cloud-1",cloud2:"cloud-2"}}},o={idle:"idle",joy:"joy",puke:"puke",dead:"dead"},c="plastic",r="glass",h="metal",l="paper",d="main",p="logo",u="play",g="icon",m="heart",b="main",y="puke",f="joy",w="pop",x="whoosh",v="stop",S="ding",k="heartbeat",O={showStartScreen:!0,lives:3};class T{constructor(){this.level=1,this.wasteThrowDelay=1e3,this.numberOfWastes=1,this.binsThatLevelUp=[1,3,6,9],this.fillLimit=3,this.wasteProbability=50}levelUp(e){switch(e%2===0&&this.level++,this.level){case 2:this.wasteThrowDelay=1e3,this.numberOfWastes=3,this.wasteProbability=40;break;case 3:this.wasteThrowDelay=700,this.wasteProbability=35;break;case 4:this.wasteThrowDelay=600,this.numberOfWastes=4,this.wasteProbability=30;break;case 5:this.wasteThrowDelay=500,this.numberOfWastes=5,this.wasteProbability=25}this.level>5&&(this.wasteThrowDelay-=10,this.wasteThrowDelay=Math.max(200,this.wasteThrowDelay),this.level%2===0&&this.numberOfWastes++)}}function C(e,t){return"".concat(e,"-").concat(t)}function I(e){const t=this.textures.get(e).getSourceImage();return{width:t.width,height:t.height}}var B=s(3),M=s.n(B);class W extends B.GameObjects.Text{constructor({scene:e,text:t,x:s,y:i,fontSize:a}){super(e,s,i,t,{align:"center",fontSize:a,fontStyle:"bold",shadow:{offsetX:3,offsetY:1,color:"#6ea2d0",fill:!0},wordWrap:{width:e.game.config.width,useAdvancedWrap:!0}}),e.add.existing(this)}}class j extends B.GameObjects.Group{constructor({scene:e,score:t}){const s=e.add.image(16,16,g).setDepth(1);s.setPosition(16+s.width/2,16+s.height/2);const i=new W({scene:e,text:t,x:s.width+32,y:s.height/2-24,fontSize:80});super(e,[i,s]),this.setScore=e=>{this.iconTween.restart(),this.text.setText(e)},i.setOrigin(0,0).setDepth(1),e.add.existing(this),this.icon=s,this.text=i,this.iconTween=e.tweens.add({targets:[this.icon],duration:400,ease:"Quad.easeOut",props:{angle:{value:"+=360"},scale:{value:"+=0.2",yoyo:!0}}})}}class R extends B.GameObjects.Group{constructor({scene:e}){const t=e.game.config,s=t.width,i=t.height,a=new W({scene:e,text:"WASTED\n\nTAP OR CLICK TO RESTART",x:s/2,y:i/3,fontSize:72});super(e,[a]),a.setOrigin(.5,.5),e.add.existing(this)}}class A extends B.GameObjects.Container{constructor({scene:e,lives:t}){super(e,0,0),this.lives=[];for(let s=0;s<t;s++)this.addLife(s);e.add.existing(this),this.scene=e}addLife(e){const t=this.scene.game.config.width,s=I.call(this.scene,m).width,i=this.scene.add.image(t-s*e,32,m).setOrigin(1,0).setDepth(1);return this.lives.push(i),i}increaseLives(){const e=this.addLife(this.lives.length);this.scene.tweens.add({targets:[e],duration:250,ease:"Quad.easeOut",scale:"+=0.5",yoyo:!0})}decreaseLives(){const e=this.lives.pop();this.lives.length>1?this.scene.tweens.add({targets:[e],duration:250,ease:"Quad.easeOut",scale:"+=0.5",yoyo:!0,onComplete:()=>e.destroy()}):e.destroy()}}class D extends B.GameObjects.Group{constructor({scene:e,maxScore:t}){const s=e.game.config.width,i=e.add.image(16,16,g).setDepth(1),a=new W({scene:e,text:"Max",x:0,y:i.height/2-24,fontSize:80}).setDepth(1),n=new W({scene:e,text:"is ".concat(t),x:0,y:i.height/2-24,fontSize:80});super(e,[a,n,i]),n.setOrigin(0,0).setDepth(1);const o=a.width+i.width+n.width+32,c=Math.floor((s-o)/2);a.x=c,i.setPosition(a.x+a.width+i.width/2+16,16+i.height/2),n.x=i.x+i.width/2+16,e.add.existing(this),this.icon=i,this.iconTween=e.tweens.add({targets:[this.icon],duration:400,ease:"Quad.easeOut",props:{angle:{value:"+=360"},scale:{value:"+=0.2",yoyo:!0}}})}}class G extends B.Scene{constructor(){super({key:i})}preload(){const e=this.game.config,t=e.width,i=e.height,a=t<900?52:56,c=t/(t<900?1.3:2),r=t/2-c/2,h=i/2,l=new W({scene:this,x:r,y:h-20,text:"Loading...",fontSize:a}).setOrigin(0,1),O=new W({scene:this,x:r+c,y:h-20,text:"0%",fontSize:a}).setOrigin(1,1),T=this.add.graphics(),I=this.add.graphics();I.fillStyle(13954295,.5),I.fillRoundedRect(r,h,c,80,16),this.load.on("progress",e=>{T.clear(),T.fillStyle(15987711),T.fillRoundedRect(r+20,h+20,(c-40)*e,40,8),O.setText("".concat(parseInt(100*e),"%"))}),this.load.on("complete",()=>{T.destroy(),I.destroy(),l.destroy()});const B=this.load;B.image(n.waste.general,s(1453)),B.image(n.waste.plastic.bottle,s(1454)),B.image(n.waste.glass.bottle,s(1455)),B.image(n.waste.metal.can,s(1456)),B.image(n.waste.paper.ball,s(1457));for(var M=0,j=Object.values(n.bin);M<j.length;M++){const e=j[M];for(var R=0,A=Object.values(o);R<A.length;R++){const t=A[R];B.spritesheet(C(e,t),s(1458)("./".concat(e,"/").concat(t,".png")),{frameWidth:450,frameHeight:450})}}B.image(n.back.gradient,s(1475)),B.image(n.back.floor,s(1476)),B.image(n.back.pavement,s(1477)),B.image(n.back.grass,s(1478)),B.image(n.back.shrub,s(1479)),B.image(n.back.city,s(1480)),B.image(n.back.cityBack,s(1481));for(let o=0;o<3;o++)B.image(n.back.clouds["cloud".concat(o)],s(1482)("./cloud-".concat(o,".png")));B.bitmapFont(d,s(1486),s(1487)),B.image(p,s(1488)),B.image(u,s(1489)),B.image(g,s(1490)),B.image(m,s(1491)),B.audio(b,s(1492)),B.audio(y,s(1493)),B.audio(f,s(1494)),B.audio(w,s(1495)),B.audio(x,s(1496)),B.audio(v,s(1497)),B.audio(S,s(1498)),B.audio(k,s(1499))}create(){this.scene.start(a)}}const L={dispose(){this.destroy()},getRandomVelocity(){const e=this.scene.game.config.width;let t=M.a.Math.Between(0,8);return t=this.x<e/2?t:-t,{velX:t,velY:M.a.Math.Between(-25,-30)}},getRandomAngleVelocity(){const e=1===M.a.Math.Between(0,1)?-1:1;return M.a.Math.RND.realInRange(.01,.06)*e},throw(){const e=this.getRandomVelocity(),t=e.velX,s=e.velY;this.setVisible(!0).setVelocity(t,s)},throwWithRandomAngle(){const e=this.getRandomVelocity(),t=e.velX,s=e.velY,i=this.getRandomAngleVelocity();this.setVisible(!0).setAngularVelocity(i).setVelocity(t,s)}};function V(e){for(var t=0,s=Object.keys(L);t<s.length;t++){const i=s[t];e[i]=L[i]}}class F extends B.Physics.Matter.Sprite{constructor({scene:e,key:t,type:s}){const i=e.game.config,a=i.width,n=i.height;super(e.matter.world,0,n,t),e.add.existing(this),this.setBounce(.95).setVisible(!1);const o=M.a.Math.Between(this.width/2,a-this.width),c=n;this.setPosition(o,c),this.type=s,V(this)}}class P extends F{constructor({scene:e}){super({scene:e,key:n.waste.general})}}class E extends F{constructor({scene:e}){super({scene:e,key:n.waste.plastic.bottle,type:c})}}class U extends F{constructor({scene:e}){super({scene:e,key:n.waste.glass.bottle,type:r})}}class z extends F{constructor({scene:e}){super({scene:e,key:n.waste.metal.can,type:h})}}class N extends F{constructor({scene:e}){super({scene:e,key:n.waste.paper.ball,type:l})}}class J{constructor({scene:e}){this.scene=e,this.wasteTypes=[P,E,U,z,N]}getRandomWaste({neededType:e,probability:t}={}){const s=M.a.Math.Between(0,100)>=100-t;return new(e&&s?this.getOfType(e):M.a.Math.RND.pick(this.wasteTypes))({scene:this.scene})}getWasteOfType(e){return new(this.getOfType(e))({scene:this.scene})}getOfType(e){switch(e){case r:return U;case c:return E;case h:return z;case l:return N;default:return P}}}class X extends B.Physics.Matter.Sprite{constructor({scene:e,x:t,key:s,type:i}){const a=e.game.config.height;super(e.matter.world,t,a-400),this.setDisplaySize(320,10).setSensor(!0).setStatic(!0),this.animJoy=C(s,o.joy),this.animIdle=C(s,o.idle),this.animPuke=C(s,o.puke),this.animDead=C(s,o.dead),this.binImage=e.add.sprite(t,a,s),this.binImage.anims.play(this.animIdle),this.binImage.setOrigin(.5,1),this.binImage.on("animationcomplete",this.handleAnimationComplete,this),this.type=i,this.fill=0}handleAnimationComplete(e){e.key!==this.animJoy&&e.key!==this.animPuke||this.binImage.anims.play(this.animIdle)}die(){this.destroy(),this.binImage.anims.play(this.animDead)}checkIfTypeMatch(e){return this.type===e}checkIfFull(e){return this.fill===e}hitWrong(){this.scene.sound.play(y),this.binImage.anims.play(this.animPuke)}hitRight(){this.scene.sound.play(f,{volume:.2}),this.binImage.anims.play(this.animJoy),this.increaseFill()}increaseFill(){this.fill++}}class Y extends X{constructor({scene:e,x:t}){super({scene:e,x:t,key:n.bin.plastic,type:c})}}class _ extends X{constructor({scene:e,x:t}){super({scene:e,x:t,key:n.bin.glass,type:r})}}class Q extends X{constructor({scene:e,x:t}){super({scene:e,x:t,key:n.bin.metal,type:h})}}class H extends X{constructor({scene:e,x:t}){super({scene:e,x:t,key:n.bin.paper,type:l})}}class K{constructor({scene:e}){this.scene=e,this.binTypes=[Y,_,Q,H]}getRandomBin({x:e,types:t=this.binTypes}){return new(M.a.Math.RND.pick(t))({scene:this.scene,x:e})}getRandomBinExceptOf({x:e,type:t}){const s=this.binTypes.filter(e=>this.getOfType(t)!==e);return this.getRandomBin({x:e,types:s})}getOfType(e){switch(e){case r:return _;case c:return Y;case h:return Q;case l:return H;default:return}}}class $ extends B.Physics.Matter.Sprite{constructor({scene:e}){const t=e.game.config,s=t.width,i=t.height;super(e.matter.world,0,i,m),e.add.existing(this),this.setBounce(.95).setVisible(!1).setInteractive().setScale(1.2).setSensor(!0);const a=M.a.Math.Between(this.width/2,s-this.width),n=i;this.setPosition(a,n),V(this)}}function q(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var s=[],i=!0,a=!1,n=void 0;try{for(var o,c=e[Symbol.iterator]();!(i=(o=c.next()).done)&&(s.push(o.value),!t||s.length!==t);i=!0);}catch(r){a=!0,n=r}finally{try{i||null==c.return||c.return()}finally{if(a)throw n}}return s}(e,t)||Z(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Z(e,t){if(e){if("string"===typeof e)return ee(e,t);var s=Object.prototype.toString.call(e).slice(8,-1);return"Object"===s&&e.constructor&&(s=e.constructor.name),"Map"===s||"Set"===s?Array.from(s):"Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?ee(e,t):void 0}}function ee(e,t){(null==t||t>e.length)&&(t=e.length);for(var s=0,i=new Array(t);s<t;s++)i[s]=e[s];return i}class te extends B.Scene{constructor(){super({key:a})}create(){const e=this.game.config,t=e.width,s=e.height,i=O.showStartScreen,a=O.lives;this.worldBounds=this.matter.world.setBounds(-200,0,t+400,s+200),this.levelManager=new T,this.lives=a,this.binsFilled=0,this.menuGroup=this.add.group(),this.music=this.sound.add(b,{loop:!0,volume:.3}),this.addBackground(),this.addAnimations(),this.wasteFactory=new J({scene:this}),this.wastes=[],this.binFactory=new K({scene:this}),this.gestures.add.swipe({threshold:10,velocityThreshold:1e3,direction:"8dir"}).on("swipe",this.handleSwipe,this),i?this.showStartScreen():this.prepareToStart()}showStartScreen(){const e=this.game.config,t=e.width,s=e.height,i=t<=960?.85:1,a=this.add.image(t/2,s/3,p).setScale(i).setOrigin(.5,1);this.menuGroup.add(a);const n=this.add.image(t/2,a.y+1.5*a.height,u).setOrigin(.5,.5).setInteractive();this.tweens.add({targets:n,scale:"+=0.05",repeat:-1,duration:600,repeatDelay:3e3,ease:"Back.easeOut",yoyo:!0}),this.menuGroup.add(n);const o=localStorage.getItem("maxScore")||0,c=new D({scene:this,maxScore:o});this.menuGroup.addMultiple(c.getChildren());const r=new W({scene:this,text:"no future without it",x:t/2,y:s,fontSize:56}).setOrigin(.5,1);this.menuGroup.add(r),n.once("pointerdown",()=>{this.prepareToStart()})}prepareToStart(){const e=this.game.config,t=e.width,s=e.height;this.tweens.add({targets:this.menuGroup.getChildren(),y:-s,duration:500,ease:"Cubic.easeIn",callbackScope:this,onComplete:()=>{this.menuGroup.toggleVisible(),this.menuGroup.active=!1}}),this.bin=this.binFactory.getRandomBin({x:t}),this.sound.play(x,{rate:.5}),this.tweens.add({targets:[this.bin,this.bin.binImage],x:t/2,duration:500,ease:"Cubic.easeOut",callbackScope:this,onComplete:this.startGame})}startGame(){this.music.play(),O.showStartScreen=!1,this.startWasteTimer(),this.startLivesTimer(),this.addScore(),this.livesGUI=new A({scene:this,lives:this.lives})}gameOver(){this.music.stop(),this.sound.play(v,{volume:.2}),this.wasteTimer.destroy(),this.livesTimer.destroy(),this.livesGUI.destroy(),this.bin.die(),this.scoreGUI.toggleVisible();const e=new R({scene:this}),t=localStorage.getItem("maxScore")||0,s=Math.max(t,this.score);new D({scene:this,maxScore:s}),localStorage.setItem("maxScore",s),this.input.once("pointerdown",()=>{e.destroy(),this.bin.binImage.destroy(),this.cameras.main.flash(350,255,255,255,!1,(e,t)=>{1===t&&this.scene.restart()})})}addBackground(){const e=this.game.config,t=e.width,s=e.height;this.add.image(-100,0,n.back.gradient).setOrigin(0,0).setDisplaySize(t+100,s);const i=this.fillSceneContinuous(n.back.floor,s),a=this.fillScene(n.back.pavement,i),o=this.fillSceneContinuous(n.back.grass,a);this.fillScene(n.back.cityBack,o-20),this.fillScene(n.back.city,o),this.fillScene(n.back.shrub,o),this.addClouds()}addClouds(){const e=this.game.config.width,t=1===M.a.Math.Between(0,1);this.cloudTimer=this.time.addEvent({delay:12*e,callback:()=>{this.addCloud(t)},callbackScope:this,loop:!0}),this.addCloud(t)}addCloud(e){const t=this.game.config.width,s=M.a.Math.Between(0,2),i=M.a.Math.RND.realInRange(.6,1).toFixed(2),a=q(e?[-300,t+300]:[t+300,-300],2),o=a[0],c=a[1],r=n.back.clouds["cloud".concat(s)],h=this.add.image(o,100,r).setOrigin(0,0).setScale(i);this.tweens.add({targets:[h],x:{value:{getEnd:()=>c}},duration:30*t,callbackScope:this,onComplete:()=>h.destroy()})}fillSceneContinuous(e,t){const s=this.game.config.width,i=I.call(this,e).height;return this.add.image(-100,t,e).setOrigin(0,1).setDisplaySize(s+200,i),t-i}fillScene(e,t){const s=this.game.config.width,i=I.call(this,e),a=i.width,n=i.height,o=Math.ceil(s/a),c=Math.floor(Math.abs(s-o*a)/2);for(let r=0;r<o;r++)this.add.image(r*a-c,t,e).setOrigin(0,1);return t-n}getImageSize(e){const t=this.textures.get(e).getSourceImage();return{width:t.width,height:t.height}}addAnimations(){for(var e=0,t=Object.values(n.bin);e<t.length;e++){const s=t[e];this.addBinAnimations(s)}}addBinAnimations(e){for(var t=0,s=Object.values(o);t<s.length;t++){const i=s[t],a=C(e,i),n=i===o.idle,c=i===o.dead,r=n?80:30,h=n?-1:c?0:1;this.anims.create({key:a,frames:this.anims.generateFrameNumbers(a),frameRate:r,repeat:h})}}addScore(){this.score=0,this.scoreGUI=new j({scene:this,score:this.score})}handleWasteCollideWalls({gameObjectA:e}){this.diposeWaste(e)}handleWasteCollideBin({gameObjectA:e}){e.body.velocity.y>0&&this.hitBin(e)}hitBin(e){this.diposeWaste(e),this.bin.checkIfTypeMatch(e.type)?(this.scoreGUI.setScore(++this.score),this.bin.hitRight()):(this.bin.hitWrong(),this.cameras.main.shake(100,.01),this.lives--,this.livesGUI.decreaseLives()),this.lives<=0&&this.gameOver(),this.bin.checkIfFull(this.levelManager.fillLimit)&&this.replaceBin()}replaceBin(){const e=this.game.config.width;function t(){this.sound.play(x,{rate:.55}),this.bin.destroy(),this.bin=this.binFactory.getRandomBinExceptOf({type:this.bin.type,x:e+this.bin.binImage.width}),this.tweens.add({targets:[this.bin,this.bin.binImage],x:e/2,duration:500,delay:150,callbackScope:this,ease:"Cubic.easeOut",onComplete:this.startNewLevel})}this.wasteTimer.destroy(),this.moveWasteAway(),this.sound.play(S,{volume:.8}),this.tweens.add({targets:[this.bin,this.bin.binImage],y:"-=300",angle:"+=".concat(0===M.a.Math.Between(0,1)?15:-15),duration:300,callbackScope:this,yoyo:!0,ease:"Cubic.easeOut",onComplete:function(){this.sound.play(x,{rate:.5}),this.tweens.add({targets:[this.bin,this.bin.binImage],x:-this.bin.binImage.width,duration:500,ease:"Cubic.easeIn",callbackScope:this,onComplete:t})}})}moveWasteAway(){var e,t=function(e){if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=Z(e))){var t=0,s=function(){};return{s:s,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a,n=!0,o=!1;return{s:function(){i=e[Symbol.iterator]()},n:function(){var e=i.next();return n=e.done,e},e:function(e){o=!0,a=e},f:function(){try{n||null==i.return||i.return()}finally{if(o)throw a}}}}(this.wastes);try{for(t.s();!(e=t.n()).done;){const t=e.value,s=t.body.velocity.x>0?1:-1;t.setVelocity(20*s,-20)}}catch(s){t.e(s)}finally{t.f()}}startNewLevel(){this.levelManager.levelUp(++this.binsFilled),this.startWasteTimer()}diposeWaste(e){const t=this.wastes.findIndex(t=>t===e);this.wastes.splice(t,1),e.dispose()}startLivesTimer(){this.livesTimer&&this.livesTimer.destroy(),this.livesTimer=this.time.addEvent({delay:16e3,callback:this.throwLife,callbackScope:this,loop:!0})}throwLife(){if(this.lives<O.lives){const e=new $({scene:this});this.tweens.add({targets:e,duration:450,ease:"Sine.easeOut",scale:"+=0.3",yoyo:!0,repeat:-1}),e.throw(),this.sound.play(k,{detune:1200}),e.once("pointerdown",()=>{this.lives>=O.lives||(this.lives++,this.lives=Math.min(this.lives,O.lives),this.livesGUI.increaseLives(),e.destroy())}),this.matterCollision.addOnCollideStart({objectA:e,objectB:[this.worldBounds.walls.left,this.worldBounds.walls.right,this.worldBounds.walls.bottom],callback:()=>e.destroy(),context:this})}}startWasteTimer(){this.wasteTimer&&this.wasteTimer.destroy(),this.wasteTimer=this.time.addEvent({delay:this.levelManager.wasteThrowDelay,callback:this.throwWaste,callbackScope:this,loop:!0})}createWasteOfBinType(){const e=this.wasteFactory.getWasteOfType(this.bin.type);return this.addCollisionToWaste(e),this.wastes.push(e),e}createRandomWaste(){const e=this.wasteFactory.getRandomWaste({neededType:this.bin.type,probability:this.levelManager.wasteProbability});return this.addCollisionToWaste(e),this.wastes.push(e),e}addCollisionToWaste(e){this.matterCollision.addOnCollideStart({objectA:e,objectB:[this.worldBounds.walls.left,this.worldBounds.walls.right,this.worldBounds.walls.bottom],callback:this.handleWasteCollideWalls,context:this}),this.matterCollision.addOnCollideStart({objectA:e,objectB:[this.bin],callback:this.handleWasteCollideBin,context:this}),this.matterCollision.addOnCollideStart({objectA:e,objectB:this.wastes,callback:()=>{const e=M.a.Math.Between(-300,300);this.sound.play(w,{detune:e})},context:this})}throwWaste(){if(this.wastes.length<this.levelManager.numberOfWastes){this.createRandomWaste().throwWithRandomAngle()}}handleSwipe(e){const t=e.x,s=e.y,i=e.left,a=e.right,n=e.up,o=e.down,c=Math.min(Math.ceil(e.getVelocityX()/80),30),r=Math.min(Math.ceil(e.getVelocityY()/100),30);this.wastes.forEach(e=>{if(function(e,{x:t,y:s},i){const a=e.getBounds(),n=a.left,o=a.right,c=a.top,r=a.bottom;return t>=n-i&&t<=o+i&&s>=c-i&&s<=r+i}(e,{x:t,y:s},50)){const t=M.a.Math.Between(-300,300);this.sound.play(x,{detune:t});let s=i?-c:a?c:0,h=n?-r:o?r:0;e.setVelocity(s,h)}})}}var se=s(533),ie=s(532),ae=s.n(ie);const ne={type:M.a.CANVAS,title:"Phaser Template",url:"https://omhet.github.io/recycle-game",version:"0.0.0",scene:[G,te],physics:{default:"matter",matter:{gravity:{y:.9},debug:!1,enableSleeping:!1}},plugins:{scene:[{key:"gestures",plugin:se.a,mapping:"gestures"},{plugin:ae.a,key:"matterCollision",mapping:"matterCollision"}]},disableContextMenu:!0,backgroundColor:"rgb(168, 210, 234)",scale:{mode:M.a.Scale.FIT,autoCenter:M.a.Scale.CENTER_BOTH}};let oe={width:750,height:1334,maxRatio:4/3};window.onload=function(){let e=oe.width,t=oe.height,s=e/t,i=window.innerWidth,a=window.innerHeight,n=Math.min(i/a,oe.maxRatio);s>n?t=e/n:e=t*n,ne.scale.width=e,ne.scale.height=t,new M.a.Game(ne),window.focus()}},534:function(e,t,s){e.exports=s(1500)},535:function(e,t,s){}},[[534,1,2]]]);
//# sourceMappingURL=main.b572f1cd.chunk.js.map